<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel | Urban Solz</title>
<style>
/* === RESET & BASE === */
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:'Poppins',sans-serif;
  background:linear-gradient(180deg,#f6f0e9 0%,#f5deb3 100%);
  color:#3e2723;
  overflow-x:hidden;
  padding-bottom:80px;
}
a{text-decoration:none;color:#3e2723;transition:color .3s}
a:hover{color:#a1887f}

/* === HEADER === */
header{
  background:rgba(255,255,255,0.95);
  backdrop-filter:blur(10px);
  position:sticky;top:0;z-index:1000;
  display:flex;justify-content:space-between;align-items:center;
  padding:1rem 6%;
  box-shadow:0 4px 10px rgba(0,0,0,0.05);
}
header h1{font-size:1.5rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:#3e2723;}
header nav a{
  margin-left:25px;font-weight:500;color:#4e342e;
}
header nav a:hover{color:#a1887f}

/* === CONTAINER === */
main{
  max-width:1100px;
  margin:50px auto;
  padding:0 6%;
}
main h2{
  font-size:1.6rem;
  margin-top:50px;
  margin-bottom:15px;
  font-weight:700;
  border-left:5px solid #3e2723;
  padding-left:10px;
  text-transform:uppercase;
}
main h1{
  font-size:2.2rem;
  font-weight:800;
  margin-bottom:15px;
  text-align:center;
  letter-spacing:1px;
}
.top-links{
  text-align:center;
  margin-bottom:40px;
}
.top-links a{
  display:inline-block;
  margin:0 10px;
  background:#3e2723;
  color:#fff;
  padding:8px 18px;
  border-radius:25px;
  font-weight:500;
  transition:background .3s,transform .3s;
}
.top-links a:hover{
  background:#a1887f;
  color:#3e2723;
  transform:translateY(-2px);
}

/* === FORMS === */
form{
  background:#fff;
  border-radius:20px;
  box-shadow:0 8px 25px rgba(0,0,0,0.08);
  padding:25px;
  margin-bottom:25px;
  transition:transform .3s;
}
form:hover{transform:translateY(-3px);}
form input[type="text"],
form input[type="number"],
form input[type="file"]{
  width:100%;
  padding:10px 14px;
  margin-bottom:15px;
  border-radius:10px;
  border:1px solid #ccc;
  font-family:'Poppins',sans-serif;
  font-size:0.95rem;
  transition:border-color .3s,box-shadow .3s;
}
form input:focus{
  border-color:#a1887f;
  box-shadow:0 0 6px rgba(161,136,127,0.5);
  outline:none;
}
form button{
  background:#3e2723;
  color:#fff;
  border:none;
  border-radius:20px;
  padding:10px 25px;
  font-size:0.95rem;
  font-weight:600;
  cursor:pointer;
  transition:background .3s,transform .3s;
}
form button:hover{
  background:#a1887f;
  color:#3e2723;
  transform:scale(1.05);
}

/* === ORDER LIST === */
.order-card{
  background:#fff;
  border-radius:15px;
  box-shadow:0 6px 15px rgba(0,0,0,0.08);
  padding:20px;
  margin-bottom:15px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  flex-wrap:wrap;
}
.order-info{
  font-size:0.95rem;
  color:#4e342e;
  flex:1;
  margin-right:15px;
}
.order-status i{
  color:#a1887f;
  font-style:italic;
}
.order-actions form{
  display:inline-block;
  margin-left:10px;
}
.order-actions button{
  background:#3e2723;
  color:#fff;
  border:none;
  border-radius:20px;
  padding:6px 14px;
  font-size:0.85rem;
  cursor:pointer;
  transition:background .3s,transform .3s;
}
.order-actions button:hover{
  background:#a1887f;
  color:#3e2723;
  transform:scale(1.05);
}

/* === PRODUCT GRID === */
.product-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
  gap:20px;
  margin-top:20px;
}
.product-card{
  background:#fff;
  border-radius:20px;
  box-shadow:0 8px 25px rgba(0,0,0,0.08);
  padding:20px;
  transition:transform .3s;
}
.product-card:hover{transform:translateY(-3px);}
.product-card img{
  width:100%;
  border-radius:15px;
  margin-bottom:10px;
  max-height:180px;
  object-fit:cover;
}
.product-card input,
.product-card button{
  width:100%;
}
.product-card button{
  margin-top:5px;
}

/* === RESPONSIVE === */
@media(max-width:700px){
  header{flex-direction:column;gap:10px;}
  .order-card{flex-direction:column;align-items:flex-start;}
  .order-actions{margin-top:10px;}
  main h1{font-size:1.7rem;}
}
</style>
</head>
<body>

<header>
  <h1>Admin Panel</h1>
  <nav>
    <a href="/admin/login?logout=1">Logout</a>
    <a href="/admin/email-settings">Email Settings</a>
  </nav>
</header>

<main>
  <h1>Dashboard</h1>
  <div class="top-links">
    <a href="/admin/email-settings">Email Settings</a>
    <a href="/admin/login?logout=1">Logout</a>
  </div>

  <h2>Stripe Keys</h2>
  <form action="/admin/config" method="POST">
    <input type="text" name="pk" value="<%= config.stripePublishableKey %>" placeholder="pk_test_..." required>
    <input type="text" name="sk" value="<%= config.stripeSecretKey %>" placeholder="sk_test_..." required>
    <button>Save Keys</button>
  </form>

  <h2>Orders</h2>
  <% orders.forEach(o => { %>
    <div class="order-card">
      <div class="order-info">
        <strong>#<%= o._id %></strong> | <%= o.email %> | $<%= o.total %> | 
        <span class="order-status"><i><%= o.status %></i></span>
      </div>
      <div class="order-actions">
        <% if (o.status === 'Pending') { %>
          <form action="/admin/order/confirm/<%= o._id %>" method="POST">
            <button>Confirm</button>
          </form>
          <form action="/admin/order/cancel/<%= o._id %>" method="POST">
            <button>Cancel</button>
          </form>
        <% } %>
      </div>
    </div>
  <% }) %>

  <h2>Add Product</h2>
  <form action="/admin/product/add" method="POST" enctype="multipart/form-data">
    <input type="text" name="name" placeholder="Name" required>
    <input type="text" name="desc" placeholder="Description" required>
    <input type="number" name="price" placeholder="Price" required>
    <input type="file" name="image" accept="image/*" required>
    <button>Add Product</button>
  </form>

  <h2>Edit Products</h2>
  <div class="product-grid">
    <% products.forEach(p => { %>
      <div class="product-card">
        <img src="<%= p.imagePath %>" alt="<%= p.name %>">
        <form action="/admin/product/edit/<%= p._id %>" method="POST" enctype="multipart/form-data">
          <input type="text" name="name" value="<%= p.name %>">
          <input type="text" name="desc" value="<%= p.description %>">
          <input type="number" name="price" value="<%= p.price %>">
          <input type="file" name="image" accept="image/*">
          <button>Update</button>
        </form>
      </div>
    <% }) %>
  </div>

</main>
</body>
</html>
